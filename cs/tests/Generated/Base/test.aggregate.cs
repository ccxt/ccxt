using ccxt;
using ccxt.pro;
namespace Tests;

// PLEASE DO NOT EDIT THIS FILE, IT IS GENERATED AND WILL BE OVERWRITTEN:
// https://github.com/ccxt/ccxt/blob/master/CONTRIBUTING.md#how-to-contribute-code

public partial class BaseTest
{
        public void testAggregate()
        {
            var exchange = new ccxt.Exchange(new Dictionary<string, object>() {
                { "id", "sampleexchange" },
            });
            object bids = new List<object>() {new List<object>() {789.1, 123}, new List<object>() {789.1, 123}, new List<object>() {123, 456}, new List<object>() {789, 123}, new List<object>() {789.1, 123}};
            object asks = new List<object>() {new List<object>() {123, 456}, new List<object>() {789, 123}, new List<object>() {789.1, 123}};
            AssertDeepEqual(exchange, null, "aggregate", exchange.aggregate(exchange.sortBy(bids, 0)), new List<object>() {new List<object>() {123, 456}, new List<object>() {789, 123}, new List<object>() {789.1, 369}});
            AssertDeepEqual(exchange, null, "aggregate", exchange.aggregate(exchange.sortBy(asks, 0)), new List<object>() {new List<object>() {123, 456}, new List<object>() {789, 123}, new List<object>() {789.1, 123}});
            AssertDeepEqual(exchange, null, "aggregate", exchange.aggregate(new List<object>() {}), new List<object>() {});
            // Test 1: Simple aggregation - same price combined
            object result1 = exchange.aggregate(new List<object>() {new List<object>() {100, 1}, new List<object>() {101, 2}, new List<object>() {100, 0.5}});
            AssertDeepEqual(exchange, null, "testAggregate", result1, new List<object>() {new List<object>() {100, 1.5}, new List<object>() {101, 2}});
            // Test 2: With extra fields (should be ignored)
            object result2 = exchange.aggregate(new List<object>() {new List<object>() {100, 1, "extra"}, new List<object>() {101, 2, "data", "more"}});
            AssertDeepEqual(exchange, null, "testAggregate", result2, new List<object>() {new List<object>() {100, 1}, new List<object>() {101, 2}});
            // Test 3: Zero volumes should be skipped
            object result3 = exchange.aggregate(new List<object>() {new List<object>() {100, 1}, new List<object>() {101, 0}, new List<object>() {102, 2}});
            AssertDeepEqual(exchange, null, "testAggregate", result3, new List<object>() {new List<object>() {100, 1}, new List<object>() {102, 2}});
            // Test 4: Empty array
            object result4 = exchange.aggregate(new List<object>() {});
            AssertDeepEqual(exchange, null, "testAggregate", result4, new List<object>() {});
            // Test 5: Single entry
            object result5 = exchange.aggregate(new List<object>() {new List<object>() {100, 1}});
            AssertDeepEqual(exchange, null, "testAggregate", result5, new List<object>() {new List<object>() {100, 1}});
            // Test 6: Many same prices aggregated
            object result6 = exchange.aggregate(new List<object>() {new List<object>() {100, 0.1}, new List<object>() {100, 0.2}, new List<object>() {100, 0.3}, new List<object>() {100, 0.4}});
            AssertDeepEqual(exchange, null, "testAggregate", result6, new List<object>() {new List<object>() {100, 1}});
            // Test 7: All zero volumes - empty result
            object result7 = exchange.aggregate(new List<object>() {new List<object>() {100, 0}, new List<object>() {101, 0}, new List<object>() {102, 0}});
            AssertDeepEqual(exchange, null, "testAggregate", result7, new List<object>() {});
            // Test 8: Preserves order of first occurrence
            object result8 = exchange.aggregate(new List<object>() {new List<object>() {103, 1}, new List<object>() {101, 1}, new List<object>() {102, 1}, new List<object>() {101, 0.5}});
            AssertDeepEqual(exchange, null, "testAggregate", result8, new List<object>() {new List<object>() {103, 1}, new List<object>() {101, 1.5}, new List<object>() {102, 1}});
            // Test 9: Decimal prices
            object result9 = exchange.aggregate(new List<object>() {new List<object>() {100.5, 1}, new List<object>() {100.5, 2}, new List<object>() {101.5, 1}});
            AssertDeepEqual(exchange, null, "testAggregate", result9, new List<object>() {new List<object>() {100.5, 3}, new List<object>() {101.5, 1}});
            // Test 10: Mixed zero and non-zero for same price
            object result10 = exchange.aggregate(new List<object>() {new List<object>() {100, 1}, new List<object>() {100, 0}, new List<object>() {100, 2}});
            AssertDeepEqual(exchange, null, "testAggregate", result10, new List<object>() {new List<object>() {100, 3}});
        }
}