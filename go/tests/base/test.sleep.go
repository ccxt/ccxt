package base

import ccxt "github.com/ccxt/ccxt/go/v4"

// PLEASE DO NOT EDIT THIS FILE, IT IS GENERATED AND WILL BE OVERWRITTEN:
// https://github.com/ccxt/ccxt/blob/master/CONTRIBUTING.md#how-to-contribute-code

func TestSleep() <-chan interface{} {
	ch := make(chan interface{})
	go func() interface{} {
		defer close(ch)
		defer ccxt.ReturnPanicError(ch)
		exchange := ccxt.NewExchange().(*ccxt.Exchange)
		exchange.DerivedExchange = exchange
		exchange.InitParent(map[string]interface{}{
			"id": "sampleexchange",
		}, map[string]interface{}{}, exchange)
		var start interface{} = exchange.Milliseconds()
		var sleepAmount interface{} = 100 // milliseconds

		retRes134 := (<-exchange.Sleep(sleepAmount))
		ccxt.PanicOnError(retRes134)
		var end interface{} = exchange.Milliseconds()
		var elapsed interface{} = ccxt.Subtract(end, start)
		// Allow a small margin of error due to execution time
		var marginOfError interface{} = 20
		var maxElapsed interface{} = ccxt.Add(sleepAmount, marginOfError)
		assert(ccxt.IsGreaterThanOrEqual(elapsed, sleepAmount), ccxt.Add(ccxt.Add(ccxt.Add(ccxt.Add("Elapsed time ", ccxt.ToString(elapsed)), "ms is less than sleep amount "), ccxt.ToString(sleepAmount)), "ms"))
		assert(ccxt.IsLessThanOrEqual(elapsed, maxElapsed), ccxt.Add(ccxt.Add(ccxt.Add(ccxt.Add("Elapsed time ", ccxt.ToString(elapsed)), "ms exceeds sleep amount "), ccxt.ToString(maxElapsed)), "ms"))
		return nil
	}()
	return ch
}
