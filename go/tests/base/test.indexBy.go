package base
import ccxt "github.com/ccxt/ccxt/go/v4"

// PLEASE DO NOT EDIT THIS FILE, IT IS GENERATED AND WILL BE OVERWRITTEN:
// https://github.com/ccxt/ccxt/blob/master/CONTRIBUTING.md#how-to-contribute-code

func TestIndexBy()  {
    exchange := ccxt.NewExchange().(*ccxt.Exchange); exchange.DerivedExchange = exchange; exchange.InitParent(map[string]interface{} {
        "id": "sampleexchange",
    }, map[string]interface{}{}, exchange)
    // Test 1: Basic list of dicts with string key
    var input1 interface{} = []interface{}{map[string]interface{} {
    "id": "a",
    "val": 1,
}, map[string]interface{} {
    "id": "b",
    "val": 2,
}, map[string]interface{} {
    "id": "c",
    "val": 3,
}}
    var expected1 map[string]interface{} = map[string]interface{} {
        "a": map[string]interface{} {
            "id": "a",
            "val": 1,
        },
        "b": map[string]interface{} {
            "id": "b",
            "val": 2,
        },
        "c": map[string]interface{} {
            "id": "c",
            "val": 3,
        },
    }
    var result1 interface{} = exchange.IndexBy(input1, "id")
    AssertDeepEqual(exchange, nil, "testIndexBy", result1, expected1)
    // Test 2: Skip elements with None/undefined values
    var input2 interface{} = []interface{}{map[string]interface{} {
    "id": "a",
    "val": 1,
}, map[string]interface{} {
    "id": "b",
    "val": 3,
}}
    var expected2 map[string]interface{} = map[string]interface{} {
        "a": map[string]interface{} {
            "id": "a",
            "val": 1,
        },
        "b": map[string]interface{} {
            "id": "b",
            "val": 3,
        },
    }
    var result2 interface{} = exchange.IndexBy(input2, "id")
    AssertDeepEqual(exchange, nil, "testIndexBy", result2, expected2)
    // Test 3: Skip elements missing the key
    var input3 interface{} = []interface{}{map[string]interface{} {
    "id": "a",
    "val": 1,
}, map[string]interface{} {
    "val": 2,
}, map[string]interface{} {
    "id": "b",
    "val": 3,
}}
    var expected3 map[string]interface{} = map[string]interface{} {
        "a": map[string]interface{} {
            "id": "a",
            "val": 1,
        },
        "b": map[string]interface{} {
            "id": "b",
            "val": 3,
        },
    }
    var result3 interface{} = exchange.IndexBy(input3, "id")
    AssertDeepEqual(exchange, nil, "testIndexBy", result3, expected3)
    // Test 4: Empty array
    var input4 interface{} = []interface{}{}
    var expected4 map[string]interface{} = map[string]interface{} {}
    var result4 interface{} = exchange.IndexBy(input4, "id")
    AssertDeepEqual(exchange, nil, "testIndexBy", result4, expected4)
    // Test 5: Duplicate keys (last one wins)
    var input5 interface{} = []interface{}{map[string]interface{} {
    "id": "a",
    "val": 1,
}, map[string]interface{} {
    "id": "a",
    "val": 2,
}, map[string]interface{} {
    "id": "a",
    "val": 3,
}}
    var expected5 map[string]interface{} = map[string]interface{} {
        "a": map[string]interface{} {
            "id": "a",
            "val": 3,
        },
    }
    var result5 interface{} = exchange.IndexBy(input5, "id")
    AssertDeepEqual(exchange, nil, "testIndexBy", result5, expected5)
    // Test 6: Numeric key values
    var input6 interface{} = []interface{}{map[string]interface{} {
    "code": 1,
    "name": "one",
}, map[string]interface{} {
    "code": 2,
    "name": "two",
}, map[string]interface{} {
    "code": 3,
    "name": "three",
}}
    var expected6 map[string]interface{} = map[string]interface{} {
        "1": map[string]interface{} {
            "code": 1,
            "name": "one",
        },
        "2": map[string]interface{} {
            "code": 2,
            "name": "two",
        },
        "3": map[string]interface{} {
            "code": 3,
            "name": "three",
        },
    }
    var result6 interface{} = exchange.IndexBy(input6, "code")
    AssertDeepEqual(exchange, nil, "testIndexBy", result6, expected6)
    // Test 7: List of arrays with integer key
    var input7 interface{} = []interface{}{[]interface{}{"a", 1}, []interface{}{"b", 2}, []interface{}{"c", 3}}
    var expected7 map[string]interface{} = map[string]interface{} {
        "a": []interface{}{"a", 1},
        "b": []interface{}{"b", 2},
        "c": []interface{}{"c", 3},
    }
    var result7 interface{} = exchange.IndexBy(input7, 0)
    AssertDeepEqual(exchange, nil, "testIndexBy", result7, expected7)
    // Test 8: Single element
    var input8 interface{} = []interface{}{map[string]interface{} {
    "id": "only",
    "val": 42,
}}
    var expected8 map[string]interface{} = map[string]interface{} {
        "only": map[string]interface{} {
            "id": "only",
            "val": 42,
        },
    }
    var result8 interface{} = exchange.IndexBy(input8, "id")
    AssertDeepEqual(exchange, nil, "testIndexBy", result8, expected8)
}