package base

import "github.com/ccxt/ccxt/go/v4"

// PLEASE DO NOT EDIT THIS FILE, IT IS GENERATED AND WILL BE OVERWRITTEN:
// https://github.com/ccxt/ccxt/blob/master/CONTRIBUTING.md#how-to-contribute-code

func TestWatchMyTrades(exchange ccxt.ICoreExchange, skippedProperties interface{}, symbol interface{}) <-chan interface{} {
	ch := make(chan interface{})
	go func() interface{} {
		defer close(ch)
		defer ReturnPanicError(ch)
		var method interface{} = "watchMyTrades"
		var now interface{} = exchange.Milliseconds()
		var ends interface{} = Add(now, 15000)
		for IsLessThan(now, ends) {
			var success interface{} = true
			var response interface{} = nil

			{
				func() (ret_ interface{}) {
					defer func() {
						if e := recover(); e != nil {
							if e == "break" {
								return
							}
							ret_ = func() interface{} {
								// catch block:
								if !IsTrue(IsTemporaryFailure(e)) {
									panic(e)
								}
								now = exchange.Milliseconds()
								// continue;
								success = false
								return nil
							}()
						}
					}()
					// try block:

					response = (UnWrapType(<-exchange.WatchMyTrades(symbol)))
					PanicOnError(response)
					return nil
				}()

			}
			if IsTrue(IsEqual(success, true)) {
				AssertNonEmtpyArray(exchange, skippedProperties, method, response, symbol)
				now = exchange.Milliseconds()
				for i := 0; IsLessThan(i, GetArrayLength(response)); i++ {
					TestTrade(exchange, skippedProperties, method, GetValue(response, i), symbol, now)
				}
				AssertTimestampOrder(exchange, method, symbol, response)
			}
		}

		ch <- true
		return nil

	}()
	return ch
}
