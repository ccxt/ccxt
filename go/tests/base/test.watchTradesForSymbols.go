package base
import "github.com/ccxt/ccxt/go/v4"

// PLEASE DO NOT EDIT THIS FILE, IT IS GENERATED AND WILL BE OVERWRITTEN:
// https://github.com/ccxt/ccxt/blob/master/CONTRIBUTING.md#how-to-contribute-code


    func TestWatchTradesForSymbols(exchange ccxt.ICoreExchange, skippedProperties interface{}, symbols interface{}) <- chan interface{} {
                ch := make(chan interface{})
                go func() interface{} {
                    defer close(ch)
                    defer ReturnPanicError(ch)
                        var method interface{} = "watchTradesForSymbols"
                var now interface{} = exchange.Milliseconds()
                var ends interface{} = Add(now, 15000)
                for IsLessThan(now, ends) {
                    var response interface{} = nil
                    var success interface{} = true
                    
                        {
                             func() (ret_ interface{}) {
                    		    defer func() {
                                    if e := recover(); e != nil {
                                        if e == "break" {
                                            return
                                        }
                                        ret_ = func() interface{} {
                                            // catch block:
                                                        if !IsTrue(IsTemporaryFailure(e)) {
                                    panic(e)
                                }
                                now = exchange.Milliseconds()
                                            return nil
                                        }()
                                    }
                                }()
                    		    // try block:
                                            
                        response = (UnWrapType(<-exchange.WatchTradesForSymbols(symbols)))
                                    PanicOnError(response)
                    		    return nil
                    	    }()
                        
                            }
                    if IsTrue(IsEqual(success, true)) {
                        Assert(IsArray(response), Add(Add(Add(Add(Add(Add(exchange.GetId(), " "), method), " "), exchange.Json(symbols)), " must return an array. "), exchange.Json(response)))
                        now = exchange.Milliseconds()
                        var symbol interface{} = nil
                        for i := 0; IsLessThan(i, GetArrayLength(response)); i++ {
                            var trade interface{} = GetValue(response, i)
                            symbol = GetValue(trade, "symbol")
                            TestTrade(exchange, skippedProperties, method, trade, symbol, now)
                            AssertInArray(exchange, skippedProperties, method, trade, "symbol", symbols)
                        }
                        if !IsTrue((InOp(skippedProperties, "timestamp"))) {
                            AssertTimestampOrder(exchange, method, symbol, response)
                        }
                    }
                }
            
                ch <- true
                return nil
            
                }()
                return ch
            }
