<?php
namespace ccxt;

// ----------------------------------------------------------------------------

// PLEASE DO NOT EDIT THIS FILE, IT IS GENERATED AND WILL BE OVERWRITTEN:
// https://github.com/ccxt/ccxt/blob/master/CONTRIBUTING.md#how-to-contribute-code

// -----------------------------------------------------------------------------


function test_index_by() {
    $exchange = new \ccxt\async\Exchange(array(
        'id' => 'sampleexchange',
    ));
    // Test 1: Basic list of dicts with string key
    $input1 = [array(
    'id' => 'a',
    'val' => 1,
), array(
    'id' => 'b',
    'val' => 2,
), array(
    'id' => 'c',
    'val' => 3,
)];
    $expected1 = array(
        'a' => array(
            'id' => 'a',
            'val' => 1,
        ),
        'b' => array(
            'id' => 'b',
            'val' => 2,
        ),
        'c' => array(
            'id' => 'c',
            'val' => 3,
        ),
    );
    $result1 = $exchange->index_by($input1, 'id');
    assert_deep_equal($exchange, null, 'testIndexBy', $result1, $expected1);
    // Test 2: Skip elements with None/undefined values
    $input2 = [array(
    'id' => 'a',
    'val' => 1,
), array(
    'id' => 'b',
    'val' => 3,
)];
    $expected2 = array(
        'a' => array(
            'id' => 'a',
            'val' => 1,
        ),
        'b' => array(
            'id' => 'b',
            'val' => 3,
        ),
    );
    $result2 = $exchange->index_by($input2, 'id');
    assert_deep_equal($exchange, null, 'testIndexBy', $result2, $expected2);
    // Test 3: Skip elements missing the key
    $input3 = [array(
    'id' => 'a',
    'val' => 1,
), array(
    'val' => 2,
), array(
    'id' => 'b',
    'val' => 3,
)];
    $expected3 = array(
        'a' => array(
            'id' => 'a',
            'val' => 1,
        ),
        'b' => array(
            'id' => 'b',
            'val' => 3,
        ),
    );
    $result3 = $exchange->index_by($input3, 'id');
    assert_deep_equal($exchange, null, 'testIndexBy', $result3, $expected3);
    // Test 4: Empty array
    $input4 = [];
    $expected4 = array();
    $result4 = $exchange->index_by($input4, 'id');
    assert_deep_equal($exchange, null, 'testIndexBy', $result4, $expected4);
    // Test 5: Duplicate keys (last one wins)
    $input5 = [array(
    'id' => 'a',
    'val' => 1,
), array(
    'id' => 'a',
    'val' => 2,
), array(
    'id' => 'a',
    'val' => 3,
)];
    $expected5 = array(
        'a' => array(
            'id' => 'a',
            'val' => 3,
        ),
    );
    $result5 = $exchange->index_by($input5, 'id');
    assert_deep_equal($exchange, null, 'testIndexBy', $result5, $expected5);
    // Test 6: Numeric key values
    $input6 = [array(
    'code' => 1,
    'name' => 'one',
), array(
    'code' => 2,
    'name' => 'two',
), array(
    'code' => 3,
    'name' => 'three',
)];
    $expected6 = array(
        '1' => array(
            'code' => 1,
            'name' => 'one',
        ),
        '2' => array(
            'code' => 2,
            'name' => 'two',
        ),
        '3' => array(
            'code' => 3,
            'name' => 'three',
        ),
    );
    $result6 = $exchange->index_by($input6, 'code');
    assert_deep_equal($exchange, null, 'testIndexBy', $result6, $expected6);
    // Test 7: List of arrays with integer key
    $input7 = [['a', 1], ['b', 2], ['c', 3]];
    $expected7 = array(
        'a' => ['a', 1],
        'b' => ['b', 2],
        'c' => ['c', 3],
    );
    $result7 = $exchange->index_by($input7, 0);
    assert_deep_equal($exchange, null, 'testIndexBy', $result7, $expected7);
    // Test 8: Single element
    $input8 = [array(
    'id' => 'only',
    'val' => 42,
)];
    $expected8 = array(
        'only' => array(
            'id' => 'only',
            'val' => 42,
        ),
    );
    $result8 = $exchange->index_by($input8, 'id');
    assert_deep_equal($exchange, null, 'testIndexBy', $result8, $expected8);
}
