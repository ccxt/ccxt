import os
import sys

root = os.path.dirname(os.path.dirname(os.path.dirname(os.path.dirname(os.path.abspath(__file__)))))
sys.path.append(root)

# ----------------------------------------------------------------------------

# PLEASE DO NOT EDIT THIS FILE, IT IS GENERATED AND WILL BE OVERWRITTEN:
# https://github.com/ccxt/ccxt/blob/master/CONTRIBUTING.md#how-to-contribute-code

# ----------------------------------------------------------------------------
# -*- coding: utf-8 -*-

import ccxt.async_support as ccxt  # noqa: F402

async def test_sleep():
    exchange = ccxt.Exchange({
        'id': 'sampleexchange',
    })
    start = exchange.milliseconds()
    sleep_amount = 100  # milliseconds
    await exchange.sleep(sleep_amount)
    end = exchange.milliseconds()
    elapsed = end - start
    # Allow a small margin of error due to execution time
    margin_of_error = 20
    max_elapsed = sleep_amount + margin_of_error
    assert elapsed >= sleep_amount, 'Elapsed time ' + str(elapsed) + 'ms is less than sleep amount ' + str(sleep_amount) + 'ms'
    assert elapsed <= max_elapsed, 'Elapsed time ' + str(elapsed) + 'ms exceeds sleep amount ' + str(max_elapsed) + 'ms'
