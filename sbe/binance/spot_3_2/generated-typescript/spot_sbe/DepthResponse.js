/**
 * Auto-generated by SBE (Simple Binary Encoding)
 * Schema: spot_sbe
 * DO NOT EDIT
 */
export class DepthResponseDecoder {
    constructor(byteOrder = 'little') {
        this.littleEndian = byteOrder === 'little';
    }
    decode(buffer, offset = 0) {
        const view = new DataView(buffer);
        let pos = offset;
        const lastUpdateId = view.getBigInt64(pos, this.littleEndian);
        pos += 8;
        const priceExponent = view.getInt8(pos);
        pos += 1;
        const qtyExponent = view.getInt8(pos);
        pos += 1;
        // Skip to end of block for forward compatibility
        pos = offset + DepthResponseDecoder.BLOCK_LENGTH;
        const bids = this.decodeBidsGroup(view, pos);
        pos = bids.nextOffset;
        const asks = this.decodeAsksGroup(view, pos);
        pos = asks.nextOffset;
        return {
            lastUpdateId: lastUpdateId,
            priceExponent: priceExponent,
            qtyExponent: qtyExponent,
            bids: bids.items,
            asks: asks.items
        };
    }
    decodeBidsGroup(view, offset) {
        let pos = offset;
        const blockLength = view.getUint16(pos, this.littleEndian);
        pos += 2;
        const numInGroup = view.getUint32(pos, this.littleEndian);
        pos += 4;
        const items = [];
        for (let i = 0; i < numInGroup; i++) {
            const itemStart = pos;
            const price = view.getBigInt64(pos, this.littleEndian);
            pos += 8;
            const qty = view.getBigInt64(pos, this.littleEndian);
            pos += 8;
            // Skip to next block for forward compatibility
            pos = itemStart + blockLength;
            items.push({
                price: price,
                qty: qty
            });
        }
        return { items, nextOffset: pos };
    }
    decodeAsksGroup(view, offset) {
        let pos = offset;
        const blockLength = view.getUint16(pos, this.littleEndian);
        pos += 2;
        const numInGroup = view.getUint32(pos, this.littleEndian);
        pos += 4;
        const items = [];
        for (let i = 0; i < numInGroup; i++) {
            const itemStart = pos;
            const price = view.getBigInt64(pos, this.littleEndian);
            pos += 8;
            const qty = view.getBigInt64(pos, this.littleEndian);
            pos += 8;
            // Skip to next block for forward compatibility
            pos = itemStart + blockLength;
            items.push({
                price: price,
                qty: qty
            });
        }
        return { items, nextOffset: pos };
    }
    static getBlockLength() {
        return DepthResponseDecoder.BLOCK_LENGTH;
    }
    static getTemplateId() {
        return DepthResponseDecoder.TEMPLATE_ID;
    }
    static getSchemaId() {
        return DepthResponseDecoder.SCHEMA_ID;
    }
    static getSchemaVersion() {
        return DepthResponseDecoder.SCHEMA_VERSION;
    }
}
DepthResponseDecoder.BLOCK_LENGTH = 10;
DepthResponseDecoder.TEMPLATE_ID = 200;
DepthResponseDecoder.SCHEMA_ID = 3;
DepthResponseDecoder.SCHEMA_VERSION = 2;
